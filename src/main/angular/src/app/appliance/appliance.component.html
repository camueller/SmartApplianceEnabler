<!--
  ~ Copyright (C) 2017 Axel MÃ¼ller <axel.mueller@avanux.de>
  ~
  ~ This program is free software; you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation; either version 2 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more appliance.
  ~
  ~ You should have received a copy of the GNU General Public License along
  ~ with this program; if not, write to the Free Software Foundation, Inc.,
  ~ 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
  -->

<form class="ui form" [formGroup]="form" (ngSubmit)="submitForm()">
  <div class="three fields">
    <div class="field">
      <label>{{'ApplianceComponent.id' | translate}}
        <i class="icon blue info circle tooltip">
          <span class="tooltiptext" style="margin-left: -20px;"
          >{{'ApplianceComponent.id.tooltip' | translate}}</span>
        </i>
      </label>
      <input type="text" placeholder="F-00000000-000000000000-00" formControlName="id">
      <div *ngIf="errors.id" class="ui negative message">{{errors.id}}</div>
    </div>
  </div>
  <h4 class="ui dividing header">{{'ApplianceComponent.general' | translate}}</h4>
  <div class="fields">
    <div class="field">
      <label>{{'ApplianceComponent.vendor' | translate}}</label>
      <input type="text" formControlName="vendor">
      <div *ngIf="errors.vendor" class="ui negative message">{{errors.vendor}}</div>
    </div>
    <div class="field">
      <label>{{'ApplianceComponent.name' | translate}}</label>
      <input type="text" formControlName="name">
      <div *ngIf="errors.name" class="ui negative message">{{errors.name}}</div>
    </div>
    <div class="field">
      <label>{{'ApplianceComponent.type' | translate}}</label>
      <select class="ui fluid dropdown" formControlName="type">
        <option value="{{ApplianceType.AIR_CONDITIONING}}">{{'ApplianceComponent.type.AirConditioning' | translate}}</option>
        <option value="{{ApplianceType.CHARGER}}">{{'ApplianceComponent.type.Charger' | translate}}</option>
        <option value="{{ApplianceType.DISH_WASHER}}">{{'ApplianceComponent.type.DishWasher' | translate}}</option>
        <option value="{{ApplianceType.DRYER}}">{{'ApplianceComponent.type.Dryer' | translate}}</option>
        <option value="{{ApplianceType.ELECTRIC_VEHICLE}}">{{'ApplianceComponent.type.ElectricVehicle' | translate}}</option>
        <option value="{{ApplianceType.EV_CHARGER}}">{{'ApplianceComponent.type.EVCharger' | translate}}</option>
        <option value="{{ApplianceType.FREEZER}}">{{'ApplianceComponent.type.Freezer' | translate}}</option>
        <option value="{{ApplianceType.FRIDGE}}">{{'ApplianceComponent.type.Fridge' | translate}}</option>
        <option value="{{ApplianceType.HEATER}}">{{'ApplianceComponent.type.Heater' | translate}}</option>
        <option value="{{ApplianceType.HEAT_PUMP}}">{{'ApplianceComponent.type.HeatPump' | translate}}</option>
        <option value="{{ApplianceType.MOTOR}}">{{'ApplianceComponent.type.Motor' | translate}}</option>
        <option value="{{ApplianceType.PUMP}}">{{'ApplianceComponent.type.Pump' | translate}}</option>
        <option value="{{ApplianceType.WASHING_MACHINE}}">{{'ApplianceComponent.type.WashingMachine' | translate}}</option>
        <option value="{{ApplianceType.OTHER}}">{{'ApplianceComponent.type.Other' | translate}}</option>
      </select>
    </div>
    <div class="field">
      <label>{{'ApplianceComponent.serial' | translate}}</label>
      <input type="text" formControlName="serial">
      <div *ngIf="errors.serial" class="ui negative message">{{errors.serial}}</div>
    </div>
  </div>

  <h4 class="ui dividing header">{{'ApplianceComponent.characteristics' | translate}}</h4>
  <div class="fields">
    <div class="field" *ngIf="isEvCharger()">
      <label class="">{{'ApplianceComponent.minPowerConsumption' | translate}}
        <i class="icon blue info circle tooltip">
          <span class="tooltiptext" style="margin-left: -180px;"
          >{{'ApplianceComponent.minPowerConsumption.tooltip' | translate}}</span>
        </i>
      </label>
      <input type="text" formControlName="minPowerConsumption">
      <div *ngIf="errors.minPowerConsumption" class="ui negative message">{{errors.minPowerConsumption}}</div>
    </div>
    <div class="field">
      <label>{{'ApplianceComponent.maxPowerConsumption' | translate}}
        <i class="icon blue info circle tooltip">
          <span class="tooltiptext" style="margin-left: -180px;"
          >{{'ApplianceComponent.maxPowerConsumption.tooltip' | translate}}</span>
        </i>
      </label>
      <input type="text" formControlName="maxPowerConsumption">
      <div *ngIf="errors.maxPowerConsumption" class="ui negative message">{{errors.maxPowerConsumption}}</div>
    </div>
    <div class="field">
      <label>{{'ApplianceComponent.interruptionsAllowed' | translate}}
        <i class="icon blue info circle tooltip">
          <span class="tooltiptext" style="margin-left: -300px;"
          >{{'ApplianceComponent.interruptionsAllowed.tooltip' | translate}}</span>
        </i>
      </label>
      <input class="ui checkbox" type="checkbox" formControlName="interruptionsAllowed">
    </div>
  </div>
  <div class="fields">
    <div class="field">
      <label>{{'ApplianceComponent.minOnTime' | translate}}
        <i class="icon blue info circle tooltip">
          <span class="tooltiptext" style="margin-left: -130px;"
          >{{'ApplianceComponent.minOnTime.tooltip' | translate}}</span>
        </i>
      </label>
      <input type="text" formControlName="minOnTime">
      <div *ngIf="errors.minOnTime" class="ui negative message">{{errors.minOnTime}}</div>
    </div>
    <div class="field">
      <label>{{'ApplianceComponent.maxOnTime' | translate}}
        <i class="icon blue info circle tooltip">
          <span class="tooltiptext" style="margin-left: -130px;"
          >{{'ApplianceComponent.maxOnTime.tooltip' | translate}}</span>
        </i>
      </label>
      <input type="text" formControlName="maxOnTime">
      <div *ngIf="errors.maxOnTime" class="ui negative message">{{errors.maxOnTime}}</div>
    </div>
    <div class="field">
      <label>{{'ApplianceComponent.minOffTime' | translate}}
        <i class="icon blue info circle tooltip">
          <span class="tooltiptext" style="margin-left: -130px;"
          >{{'ApplianceComponent.minOffTime.tooltip' | translate}}</span>
        </i>
      </label>
      <input type="text" formControlName="minOffTime">
      <div *ngIf="errors.minOffTime" class="ui negative message">{{errors.minOffTime}}</div>
    </div>
    <div class="field">
      <label>{{'ApplianceComponent.maxOffTime' | translate}}
        <i class="icon blue info circle tooltip">
          <span class="tooltiptext" style="margin-left: -300px;"
          >{{'ApplianceComponent.maxOffTime.tooltip' | translate}}</span>
        </i>
      </label>
      <input type="text" formControlName="maxOffTime">
      <div *ngIf="errors.maxOffTime" class="ui negative message">{{errors.maxOffTime}}</div>
    </div>
  </div>

  <button type="submit" class="ui primary button" [disabled]="form.pristine||form.invalid">
    {{'button.save' | translate}}</button>
  <button type="button" (click)="deleteAppliance()" class="ui button">
    {{'button.delete' | translate}}</button>
</form>
