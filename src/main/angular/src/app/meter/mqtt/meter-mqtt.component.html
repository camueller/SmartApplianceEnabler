<div class="MeterMqttComponent">
  <div class="sae__fields">
    <mat-form-field class="sae__mqttTopic">
      <mat-label>{{'MeterMqttComponent.topic' | translate}}</mat-label>
      <input matInput type="text" formControlName="topic"
        required="{{isRequired('topic')}}">
      @if (errors.topic) {
        <mat-error>{{errors.topic}}</mat-error>
      }
    </mat-form-field>
    <mat-form-field class="sae__value-name">
      <mat-label>{{'MeterMqttComponent.name' | translate}}</mat-label>
      <mat-select formControlName="name" required="{{isRequired('name')}}" (ngModelChange)="onNameChanged($event)">
        @for (valueName of valueNames; track valueName) {
          <mat-option [value]="valueName">
            {{getTranslatedValueName(valueName)}}
          </mat-option>
        }
      </mat-select>
    </mat-form-field>
    <mat-form-field>
      <mat-label>{{'MeterMqttComponent.contentProtocol' | translate}}</mat-label>
      <mat-select formControlName="contentProtocol" (ngModelChange)="onContentProtocolChanged($event)" required="{{isRequired('contentProtocol')}}">
        @for (contentProtocol of contentProtocols; track contentProtocol) {
          <mat-option [value]="contentProtocol">
            {{contentProtocol}}
          </mat-option>
        }
      </mat-select>
    </mat-form-field>
    <mat-form-field class="sae__contentPath">
      <mat-label>{{'MeterMqttComponent.path' | translate}}</mat-label>
      <input matInput type="text" formControlName="path"
        required="{{isRequired('path')}}">
      @if (errors.path) {
        <mat-error>{{errors.path}}</mat-error>
      }
    </mat-form-field>
    <mat-form-field class="sae__contentPath">
      <mat-label>{{'MeterMqttComponent.timePath' | translate}}</mat-label>
      <input matInput type="text" formControlName="timePath"
        required="{{isRequired('timePath')}}">
      @if (errors.timePath) {
        <mat-error>{{errors.timePath}}</mat-error>
      }
    </mat-form-field>
    <mat-form-field class="sae__regex">
      <mat-label>{{'MeterMqttComponent.extractionRegex' | translate}}</mat-label>
      <input matInput type="text" formControlName="extractionRegex"
        matTooltip="{{'regex.tooltip' | translate}}"
        [matTooltipDisabled]="'matTooltipDisabled' | env"
        required="{{isRequired('extractionRegex')}}">
      @if (errors.extractionRegex) {
        <mat-error>{{errors.extractionRegex}}</mat-error>
      }
    </mat-form-field>
    <mat-form-field class="sae__factorToValue">
      <mat-label>{{'MeterMqttComponent.factorToValue' | translate}}</mat-label>
      <input matInput type="text" formControlName="factorToValue"
        placeholder="1"
        required="{{isRequired('factorToValue')}}">
      @if (errors.factorToValue) {
        <mat-error>{{errors.factorToValue}}</mat-error>
      }
    </mat-form-field>
  </div>
</div>
